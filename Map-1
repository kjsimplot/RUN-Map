<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skilled Nursing Certified Hospital Locations Map</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />

  <style>
    body {
      font-family: Aptos, sans-serif;
      color: #132f45;
      background-color: #f8f9fa;
      margin: 0;
      padding: 40px 0;
    }
    .map-container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.15);
      overflow: hidden;
    }
    .map-header {
      background-color: #c10e21;
      color: white;
      text-align: center;
      padding: 20px;
    }
    .map-header h2 {
      margin: 0;
      font-size: 24px;
    }
    .map-header p {
      margin: 8px 0 0;
      font-size: 16px;
    }
    .search-bar {
      background: #f1f3f5;
      padding: 15px;
      text-align: center;
      border-bottom: 1px solid #dee2e6;
    }
    .search-bar input {
      width: 80%;
      max-width: 500px;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 6px;
      border: 2px solid #c10e21;
      outline: none;
    }
    .search-bar input:focus {
      border-color: #17a2b8;
    }
    #hospitalMap {
      height: 500px;
      width: 100%;
      border-top: 2px solid #868e96;
    }
  </style>
</head>
<body>

  <div class="map-container">
    <div class="map-header">
      <h2>Hospital Locations</h2>
      <p>Explore hospital locations across the U.S. â€” click markers or search below.</p>
    </div>

    <!-- Visible search bar above the map -->
    <div class="search-bar">
      <input type="text" id="hospitalSearch" placeholder="ðŸ” Find a hospital or city..." />
    </div>

    <div id="hospitalMap"></div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

  <script>
    (function() {
      const map = L.map('hospitalMap').setView([39.8283, -98.5795], 4);

      // Base map tiles
      L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: 'Â© OpenStreetMap contributors Â© CARTO'
      }).addTo(map);

      // Hospital data
const hospitals = [
  {
    name: "Akron Children's Hospital",
    city: "Akron, OH",
    address: "214 W Bowery St, Akron, OH 44308",
    url: "https://rqicommunity.heart.org/lighthouse-akron",
    lat: 41.079128,
    lng: -81.525078
  },
  {
    name: "AnMed Health",
    city: "Anderson, SC",
    address: "800 N Fant St, Anderson, SC 29621",
    url: "https://rqicommunity.heart.org/lighthouse-anmed",
    lat: 34.511768,
    lng: -82.646873
  },
  {
    name: "Baptist Health South Florida",
    city: "Coral Gables, FL",
    address: "5000 University Dr, Coral Gables, FL 33146",
    url: "https://rqicommunity.heart.org/lighthouse-baptist",
    lat: 25.724489,
    lng: -80.273628
  },
  {
    name: "CHOC at Mission Hospital",
    city: "Mission Viejo, CA",
    address: "27700 Medical Center Rd 5th floor, Mission Viejo, CA 92691",
    url: "https://rqicommunity.heart.org/lighthouse-CHOC",
    lat: 33.561119,
    lng: -117.665451
  },
  {
    name: "Conway Regional Health System",
    city: "Conway, AR",
    address: "2302 College Ave, Conway, AR 72034",
    url: "https://rqicommunity.heart.org/lighthouse-conway",
    lat: 35.085861,
    lng: -92.457176
  },
  {
    name: "Dignity Health Yavapai Regional Medical Center",
    city: "Prescott, AZ",
    address: "7700 Florentine Rd Bldg B Suite 101, Prescott Valley, AZ 86314",
    url: "https://rqicommunity.heart.org/lighthouse-dignityhealth",
    lat: 34.588277,
    lng: -112.33086
  },
  {
    name: "Fulton County Medical Center",
    city: "McConnellsburg, PA",
    address: "214 Peach Orchard Rd, Mcconnellsburg, PA 17233",
    url: "https://rqicommunity.heart.org/lighthouse-fulton",
    lat: 39.9371333,
    lng: -78.0070351
  },
  {
    name: "Greater Baltimore Medical Center",
    city: "Towson, MD",
    address: "6701 N Charles St, Towson, MD 21204",
    url: "https://rqicommunity.heart.org/lighthouse-gbmc",
    lat: 39.394314,
    lng: -76.627826
  },
  {
    name: "Intermountain Healthcare",
    city: "Salt Lake City, UT",
    address: "36 S State St fl 22, Salt Lake City, UT 84103",
    url: "https://rqicommunity.heart.org/lighthouse-intermountain",
    lat: 40.770551,
    lng: -111.888226
  },
  {
    name: "Mary Greeley Medical Center",
    city: "Ames, IA",
    address: "1111 Duff Ave, Ames, IA 50010",
    url: "https://rqicommunity.heart.org/lighthouse-marygreeley",
    lat: 42.0326163,
    lng: -93.6122883
  },
  {
    name: "Memorial Care Saddleback Medical Center",
    city: "Laguna Hills, CA",
    address: "24451 Health Center Dr, Laguna Hills, CA 92653",
    url: "https://rqicommunity.heart.org/lighthouse-memorialcare",
    lat: 33.6086341,
    lng: -117.7094042
  },
  {
    name: "Trinity Health",
    city: "Grand Rapids, MI",
    address: "200 Jefferson Ave SE, Grand Rapids, MI 49503",
    url: "https://rqicommunity.heart.org/lighthouse-trinityhealth",
    lat: 42.9600357,
    lng: -85.663661
  },
  {
    name: "The Ohio State University: Wexner Medical Center",
    city: "Columbus, OH",
    address: "410 W 10th Ave, Columbus, OH 43210",
    url: "https://rqicommunity.heart.org/lighthouse-wexner",
    lat: 39.993996,
    lng: -83.0208962
  },
  {
    name: "Salem Health Hospitals and Clinics",
    city: "Salem, OR",
    address: "890 Oak St SE Bldg A, Salem, OR 97301",
    url: "https://rqicommunity.heart.org/lighthouse-salem",
    lat: 44.9327095,
    lng: -123.0339917
  },
  {
    name: "St. Charles Health System",
    city: "Bend, OR",
    address: "2500 NE Neff Rd, Bend, OR 97701",
    url: "https://rqicommunity.heart.org/lighthouse-stcharles",
    lat: 44.0675303,
    lng: -121.2693418
  },
  {
    name: "The University of Kansas Health System",
    city: "Kansas City, KS",
    address: "4000 Cambridge St, Kansas City, KS 66160",
    url: "https://rqicommunity.heart.org/lighthouse-kansas",
    lat: 39.0559267,
    lng: -94.6090332
  },
  {
    name: "University of Rochester Medical Center",
    city: "Rochester, NY",
    address: "601 Elmwood Ave, Rochester, NY 14642",
    url: "https://rqicommunity.heart.org/lighthouse-rochester",
    lat: 43.12293,
    lng: -77.6253832
  }
];


      const markers = L.markerClusterGroup();
      const hospitalIcon = L.icon({
        iconUrl: 'https://img.icons8.com/?size=100&id=rBh1fuOC6Bjx&format=png&color=000000',
        iconSize: [30, 30],
        iconAnchor: [15, 30],
        popupAnchor: [0, -30]
      });

      const markerList = hospitals.map(h => {
        const marker = L.marker([h.lat, h.lng], { icon: hospitalIcon })
          .bindPopup(`
            <div style='font-family: Aptos, sans-serif; line-height: 1.4;'>
              <strong style='color:#c10e21;'>${h.name}</strong><br>
              <span style='color:#868e96;'>${h.address}</span><br>
              <a href='${h.url}' target='_blank' style='color:#17a2b8; text-decoration:none;'>Visit website â†’</a>
            </div>
          `);
        markers.addLayer(marker);
        marker.hospitalData = h;
        return marker;
      });

      map.addLayer(markers);

      // Enhanced search: match hospital name OR city
      const searchInput = document.getElementById('hospitalSearch');
      searchInput.addEventListener('input', function() {
        const query = this.value.trim().toLowerCase();
        if (!query) return;

        const matches = markerList.filter(m =>
          m.hospitalData.name.toLowerCase().includes(query) ||
          m.hospitalData.city.toLowerCase().includes(query)
        );

        if (matches.length === 1) {
          // Single match: zoom in close and open popup
          map.setView(matches[0].getLatLng(), 10);
          matches[0].openPopup();
        } else if (matches.length > 1) {
          // Multiple matches: fit map bounds to all results
          const group = L.featureGroup(matches);
          map.fitBounds(group.getBounds().pad(0.3));
          matches.forEach(m => m.openPopup());
        }
      });
    })();
  </script>
</body>
</html>
